#!/Melify/bin/mac/tclkit

######################################################
####
######################################################
proc test {nticks date symbol timeout} {
    queue::init $nticks

    source "~/Dropbox/Trader/stocks/$symbol/$date/$symbol.txt"

    foreach k [dict key $stocks] {
	foreach {i j} [dict get $stocks $k] {
	    set ctick($i) $j
	}
	
	#puts -nonewline ".";flush stdout
	
	queue::add

	after $timeout
    }
}

#RUN TEST SCRIPT
test 5 2019-11-19 AAPL 0
