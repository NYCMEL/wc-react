#!/Melify/bin/mac/tclkit

set date "2019-11-19"
set nticks 4
set symbol "AAPL"

############################
set u 0
set d 0
set pu 0
set pd 0

source "~/Dropbox/Trader/stocks/$symbol/$date/$symbol.txt"

set cnt 0

foreach k [dict key $stocks] {
    foreach {i j} [dict get $stocks $k] {
	set a($i) $j
    }
    
    #if {[incr cnt] > 20} exit;#TMP
    
    if {$a(lastPrice) > $pu} {
	# PRICE IS UP
	incr u; set d 0
	set pu $a(lastPrice)
    } elseif {$a(lastPrice) < $pu} {
	# PRICE IS DOWN
	incr d; set u 0
	set pd $a(lastPrice)
    }

    if {$u == 4} {
	puts SEL>>>>>>>>>>>$u|$d|$pd
	set u 0;set d 0
    }

    if {$d == 4} {
	puts BUY>>>>>>>>>>>$u|$d|$pu
	set u 0;set d 0
    }
}
