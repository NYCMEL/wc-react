#!/Melify/bin/mac/tclkit

if {[file exist ".github"] == 0} {
    puts "Can not locate '.github' file"
    exit
}

set f [open ".github" r]
set c 0

puts "\n"
while {[gets $f line] >= 0} {
    if {[string trim $line] == ""} {
	continue
    }

    incr c

    set gpath [lindex $line 0]

    switch [llength $line] {
	"1" {
	    set gname [string range [file tail $gpath] 0 end-4]

	    if {[file exist $gname] == 0} {
		puts -nonewline "\t$c: $gname ... ";flush stdout
		catch {exec /usr/bin/git clone $line}
		puts "done";flush stdout
	    }
	}
	"2" {
	    set gname [lindex $line 1]

	    if {[file exist $gname] == 0} {
		puts -nonewline "\t$c: $gname ... ";flush stdout
		catch {eval exec /usr/bin/git clone $line}
		puts "done";flush stdout
	    }
	}
    }
}

puts "TOTAL: $c\n"

close $f
