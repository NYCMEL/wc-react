<!doctype html>
<html lang="en">
    <head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>XXX</title>

	<!-- REQUIRED BY W3C STATS -->
	<script>
	 wcENV="dev";
	 wcAPP="YOUR APPLICATION NAME GOES HERE";
	 wcURL="http://www.melify.com/tk/lib/components/w";
	</script>
	
	<!-- DO NOT INCLUDE IF ALREADY HAVE IT -->
	<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
	<link href="/tk/lib/components/w/dist/fonts-all.css" rel="stylesheet">

	<style>
	 body {font-size:12px}
	</style>
    </head>

    <body id="wc">
	<script type="text/javascript" src="/tk/bundles/wc.bundle.gz.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.js"></script>

	<script>
	 // 31: Last Price
	 // 55: Symbol
         // 70: High
	 // 71: Low
	 // 72: Position
	 // 75: Unrealized PnL
	 // 82: Change Price
	 // 83: Change Percent
	 // 84: Bid Price
	 // 88: Bid Size
	 // 86: Ask Price
	 // 85: Ask Size
	 // 87: Volume
	 // 7296: Close Price
	 // conid: Symbol Reference (INT)
	 // _updated: last updated date

	 let symbol = "265598,1520593,3691937,27302065";

	 function getit(symbol) {
	     $.getJSON(`https://localhost:5000/v1/portal/iserver/marketdata/snapshot?conids=${symbol}`, function(data) {
		 $("body").prepend(JSON.stringify(data) + "<hr>");
		 
		 wc.log(">>>>>>>>>>>", moment(data._updated).format("hh:mm:ss DD-MM-YYYY"))
	     }).fail(function(jqXHR, textStatus, errorThrown) {
		 alert("incoming Text " + jqXHR.responseText);
	     });

	     setTimeout(function(){
		 // CHECK STATUS
		 $.getJSON("https://localhost:5000/v1/portal/iserver/auth/status", function(data) {
		     wc.log(">>>>>>>>>", data)
		 });

		 getit(symbol)
	     }, 5000);
	 }

	 getit(symbol);
	</script>
    </body>
</html>
