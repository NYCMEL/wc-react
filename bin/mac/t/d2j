#!/Melify/bin/mac/tclkit

source "/Melify/mtk/dev/tk/src/utl/json2dict.tcl"

proc d2j {symbol} {
    source "/Users/melify/Dropbox/Trader/stocks/$symbol/2019-11-19/$symbol.txt"

    set res "\["
    foreach k [dict key $stocks] {
	foreach {i j} [dict get $stocks $k] {
	    set a($i) $j

	    set tstr ""
	    foreach k [array names a] {
		append tstr "\"$k\":\"$a($k)\","
	    }
	}
	set tstr [string replace $tstr end end]
	append res "\{$tstr\},"
    }

    set res [string replace $res end end]
    append res "\]"

    return $res
}

puts [d2j BA]
